{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { useState, useEffect } from 'react';\nimport { useAuth } from \"../../auth/hooks/useAuth\";\nimport { receiptApi } from \"../services/receipts\";\nimport { useToast } from \"../../../shared/hooks/useToast\";\nexport var useReceipts = function useReceipts() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    receipts = _useState2[0],\n    setReceipts = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  var _useToast = useToast(),\n    showToast = _useToast.showToast;\n  var fetchReceipts = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      try {\n        setLoading(true);\n        setError(null);\n        if (!user) {\n          throw new Error('User not authenticated');\n        }\n        var response = yield receiptApi.getReceipts(filters);\n        setReceipts(response.data || []);\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching receipts:', err);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function fetchReceipts() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var addReceipt = function () {\n    var _ref2 = _asyncToGenerator(function* (receiptData) {\n      var imageFile = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      try {\n        setLoading(true);\n        setError(null);\n        if (!user) {\n          throw new Error('User not authenticated');\n        }\n        var result = yield receiptApi.createReceipt(receiptData, imageFile);\n        yield fetchReceipts();\n        showToast('Receipt added successfully', 'success');\n        return result;\n      } catch (err) {\n        setError(err.message);\n        showToast(err.message, 'error');\n        console.error('Error adding receipt:', err);\n        throw err;\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function addReceipt(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var updateReceipt = function () {\n    var _ref3 = _asyncToGenerator(function* (receiptId, receiptData) {\n      var imageFile = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      try {\n        setLoading(true);\n        setError(null);\n        if (!user) {\n          throw new Error('User not authenticated');\n        }\n        var result = yield receiptApi.updateReceipt(receiptId, receiptData, imageFile);\n        setReceipts(function (prev) {\n          return prev.map(function (receipt) {\n            return receipt.id === receiptId ? _objectSpread(_objectSpread({}, receipt), receiptData) : receipt;\n          });\n        });\n        showToast('Receipt updated successfully', 'success');\n        return result;\n      } catch (err) {\n        setError(err.message);\n        showToast(err.message, 'error');\n        console.error('Error updating receipt:', err);\n        throw err;\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function updateReceipt(_x2, _x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var deleteReceipt = function () {\n    var _ref4 = _asyncToGenerator(function* (receiptId) {\n      try {\n        setLoading(true);\n        setError(null);\n        if (!user) {\n          throw new Error('User not authenticated');\n        }\n        yield receiptApi.deleteReceipt(receiptId);\n        setReceipts(function (prev) {\n          return prev.filter(function (receipt) {\n            return receipt.id !== receiptId;\n          });\n        });\n        showToast('Receipt deleted successfully', 'success');\n      } catch (err) {\n        setError(err.message);\n        showToast(err.message, 'error');\n        console.error('Error deleting receipt:', err);\n        throw err;\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function deleteReceipt(_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    if (user) {\n      fetchReceipts();\n    } else {\n      setReceipts([]);\n    }\n  }, [user]);\n  return {\n    receipts: receipts,\n    loading: loading,\n    error: error,\n    fetchReceipts: fetchReceipts,\n    addReceipt: addReceipt,\n    updateReceipt: updateReceipt,\n    deleteReceipt: deleteReceipt\n  };\n};\nexport default useReceipts;","map":{"version":3,"names":["useState","useEffect","useAuth","receiptApi","useToast","useReceipts","_useState","_useState2","_slicedToArray","receipts","setReceipts","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useAuth","user","_useToast","showToast","fetchReceipts","_ref","_asyncToGenerator","filters","arguments","length","undefined","Error","response","getReceipts","data","err","message","console","apply","addReceipt","_ref2","receiptData","imageFile","result","createReceipt","_x","updateReceipt","_ref3","receiptId","prev","map","receipt","id","_objectSpread","_x2","_x3","deleteReceipt","_ref4","filter","_x4"],"sources":["C:/Users/user/Documents/app.v3/client/src/features/receipts/hooks/useReceipts.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../auth/hooks/useAuth';\r\nimport { receiptApi } from '../services/receipts';\r\nimport { useToast } from '../../../shared/hooks/useToast';\r\n\r\nexport const useReceipts = () => {\r\n  const [receipts, setReceipts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { user } = useAuth();\r\n  const { showToast } = useToast();\r\n\r\n  const fetchReceipts = async (filters = {}) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      if (!user) {\r\n        throw new Error('User not authenticated');\r\n      }\r\n      \r\n      const response = await receiptApi.getReceipts(filters);\r\n      setReceipts(response.data || []);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      console.error('Error fetching receipts:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addReceipt = async (receiptData, imageFile = null) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      if (!user) {\r\n        throw new Error('User not authenticated');\r\n      }\r\n      \r\n      const result = await receiptApi.createReceipt(receiptData, imageFile);\r\n      \r\n      // Refresh receipts list\r\n      await fetchReceipts();\r\n      \r\n      showToast('Receipt added successfully', 'success');\r\n      return result;\r\n    } catch (err) {\r\n      setError(err.message);\r\n      showToast(err.message, 'error');\r\n      console.error('Error adding receipt:', err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateReceipt = async (receiptId, receiptData, imageFile = null) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      if (!user) {\r\n        throw new Error('User not authenticated');\r\n      }\r\n      \r\n      const result = await receiptApi.updateReceipt(receiptId, receiptData, imageFile);\r\n      \r\n      // Update in local state\r\n      setReceipts(prev => prev.map(receipt => \r\n        receipt.id === receiptId ? { ...receipt, ...receiptData } : receipt\r\n      ));\r\n      \r\n      showToast('Receipt updated successfully', 'success');\r\n      return result;\r\n    } catch (err) {\r\n      setError(err.message);\r\n      showToast(err.message, 'error');\r\n      console.error('Error updating receipt:', err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteReceipt = async (receiptId) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      if (!user) {\r\n        throw new Error('User not authenticated');\r\n      }\r\n      \r\n      await receiptApi.deleteReceipt(receiptId);\r\n      \r\n      // Remove from local state\r\n      setReceipts(prev => prev.filter(receipt => receipt.id !== receiptId));\r\n      \r\n      showToast('Receipt deleted successfully', 'success');\r\n    } catch (err) {\r\n      setError(err.message);\r\n      showToast(err.message, 'error');\r\n      console.error('Error deleting receipt:', err);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch receipts when user changes\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchReceipts();\r\n    } else {\r\n      setReceipts([]);\r\n    }\r\n  }, [user]);\r\n\r\n  return {\r\n    receipts,\r\n    loading,\r\n    error,\r\n    fetchReceipts,\r\n    addReceipt,\r\n    updateReceipt,\r\n    deleteReceipt\r\n  };\r\n};\r\n\r\nexport default useReceipts;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}