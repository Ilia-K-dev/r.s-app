{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useCallback, useRef } from 'react';\nimport { Card } from \"../../../shared/components/ui/Card\";\nimport { Button } from \"../../../shared/components/forms/Button\";\nimport { Alert } from \"../../../shared/components/ui/Alert\";\nimport { useToast } from \"../../../shared/hooks/useToast\";\nimport { Camera, Upload, X, RotateCw, ZoomIn, ZoomOut, Maximize, Minimize } from 'lucide-react';\nimport { processImage } from \"../utils/imageProcessing\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ACCEPTED_TYPES = {\n  'image/jpeg': ['.jpg', '.jpeg'],\n  'image/png': ['.png'],\n  'image/heic': ['.heic']\n};\nvar MAX_FILE_SIZE = 10 * 1024 * 1024;\nexport var DocumentScanner = function DocumentScanner(_ref) {\n  var onScanComplete = _ref.onScanComplete,\n    _ref$loading = _ref.loading,\n    loading = _ref$loading === void 0 ? false : _ref$loading,\n    _ref$maxFileSize = _ref.maxFileSize,\n    maxFileSize = _ref$maxFileSize === void 0 ? MAX_FILE_SIZE : _ref$maxFileSize,\n    _ref$acceptedTypes = _ref.acceptedTypes,\n    acceptedTypes = _ref$acceptedTypes === void 0 ? ACCEPTED_TYPES : _ref$acceptedTypes,\n    _ref$allowCamera = _ref.allowCamera,\n    allowCamera = _ref$allowCamera === void 0 ? true : _ref$allowCamera,\n    _ref$initialInstructi = _ref.initialInstructions,\n    initialInstructions = _ref$initialInstructi === void 0 ? 'Take a photo or upload a document' : _ref$initialInstructi;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    image = _useState2[0],\n    setImage = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    preview = _useState4[0],\n    setPreview = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    rotation = _useState6[0],\n    setRotation = _useState6[1];\n  var _useState7 = useState(1),\n    _useState8 = _slicedToArray(_useState7, 2),\n    zoom = _useState8[0],\n    setZoom = _useState8[1];\n  var _useState9 = useState(null),\n    _useState0 = _slicedToArray(_useState9, 2),\n    error = _useState0[0],\n    setError = _useState0[1];\n  var _useState1 = useState(false),\n    _useState10 = _slicedToArray(_useState1, 2),\n    isFullscreen = _useState10[0],\n    setIsFullscreen = _useState10[1];\n  var fileInputRef = useRef(null);\n  var _useToast = useToast(),\n    showToast = _useToast.showToast;\n  var validateFile = function validateFile(file) {\n    if (!file) throw new Error('No file selected');\n    if (!Object.keys(acceptedTypes).includes(file.type)) {\n      throw new Error(`Unsupported file type. Accepted types: ${Object.keys(acceptedTypes).map(function (type) {\n        return type.split('/')[1];\n      }).join(', ')}`);\n    }\n    if (file.size > maxFileSize) {\n      throw new Error(`File size exceeds ${maxFileSize / (1024 * 1024)}MB limit`);\n    }\n  };\n  var handleFileSelect = useCallback(function () {\n    var _ref2 = _asyncToGenerator(function* (event) {\n      var _event$target$files;\n      var file = (_event$target$files = event.target.files) == null ? void 0 : _event$target$files[0];\n      if (!file) return;\n      try {\n        validateFile(file);\n        var previewUrl = URL.createObjectURL(file);\n        setImage(file);\n        setPreview(previewUrl);\n        setRotation(0);\n        setZoom(1);\n        setError(null);\n      } catch (err) {\n        setError(err.message);\n        showToast(err.message, 'error');\n      } finally {\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n      }\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [showToast, maxFileSize, acceptedTypes]);\n  var handleProcess = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (!image) return;\n      try {\n        var processedImage = yield processImage(image, {\n          rotation: rotation,\n          zoom: zoom,\n          quality: 0.8\n        });\n        yield onScanComplete(processedImage);\n        handleClear();\n        showToast('Document processed successfully', 'success');\n      } catch (err) {\n        setError(err.message);\n        showToast(err.message, 'error');\n      }\n    });\n    return function handleProcess() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleRotate = function handleRotate() {\n    setRotation(function (prev) {\n      return (prev + 90) % 360;\n    });\n  };\n  var handleZoom = function handleZoom(delta) {\n    setZoom(function (prev) {\n      return Math.max(0.5, Math.min(3, prev + delta));\n    });\n  };\n  var handleFullscreen = function handleFullscreen() {\n    setIsFullscreen(function (prev) {\n      return !prev;\n    });\n  };\n  var handleClear = function handleClear() {\n    if (preview) {\n      URL.revokeObjectURL(preview);\n    }\n    setImage(null);\n    setPreview(null);\n    setRotation(0);\n    setZoom(1);\n    setError(null);\n    setIsFullscreen(false);\n  };\n  var ImagePreview = function ImagePreview() {\n    return _jsxs(\"div\", {\n      className: \"space-y-4\",\n      children: [_jsx(\"div\", {\n        className: \"relative\",\n        children: _jsxs(\"div\", {\n          className: `\n          relative overflow-hidden rounded-lg\n          ${isFullscreen ? 'fixed inset-0 z-50 bg-black' : 'w-full h-96'}\n        `,\n          children: [_jsx(\"img\", {\n            src: preview,\n            alt: \"Document preview\",\n            className: \"w-full h-full object-contain transition-all duration-200\",\n            style: {\n              transform: `rotate(${rotation}deg) scale(${zoom})`,\n              cursor: isFullscreen ? 'zoom-out' : 'zoom-in'\n            },\n            onClick: handleFullscreen\n          }), _jsxs(\"div\", {\n            className: \"absolute top-2 right-2 flex space-x-2\",\n            children: [_jsx(Button, {\n              variant: \"secondary\",\n              size: \"sm\",\n              icon: RotateCw,\n              onClick: handleRotate,\n              disabled: loading,\n              title: \"Rotate image\"\n            }), _jsx(Button, {\n              variant: \"secondary\",\n              size: \"sm\",\n              icon: ZoomIn,\n              onClick: function onClick() {\n                return handleZoom(0.25);\n              },\n              disabled: loading || zoom >= 3,\n              title: \"Zoom in\"\n            }), _jsx(Button, {\n              variant: \"secondary\",\n              size: \"sm\",\n              icon: ZoomOut,\n              onClick: function onClick() {\n                return handleZoom(-0.25);\n              },\n              disabled: loading || zoom <= 0.5,\n              title: \"Zoom out\"\n            }), _jsx(Button, {\n              variant: \"secondary\",\n              size: \"sm\",\n              icon: isFullscreen ? Minimize : Maximize,\n              onClick: handleFullscreen,\n              disabled: loading,\n              title: isFullscreen ? 'Exit fullscreen' : 'View fullscreen'\n            }), _jsx(Button, {\n              variant: \"secondary\",\n              size: \"sm\",\n              icon: X,\n              onClick: handleClear,\n              disabled: loading,\n              title: \"Clear image\"\n            })]\n          })]\n        })\n      }), _jsxs(\"div\", {\n        className: \"flex justify-end space-x-2\",\n        children: [_jsx(Button, {\n          variant: \"secondary\",\n          onClick: handleClear,\n          disabled: loading,\n          children: \"Cancel\"\n        }), _jsx(Button, {\n          onClick: handleProcess,\n          loading: loading,\n          disabled: loading,\n          children: \"Process Document\"\n        })]\n      })]\n    });\n  };\n  var UploadInterface = function UploadInterface() {\n    return _jsxs(\"div\", {\n      className: \"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-primary-500 transition-colors duration-200\",\n      onClick: function onClick() {\n        var _fileInputRef$current;\n        return (_fileInputRef$current = fileInputRef.current) == null ? void 0 : _fileInputRef$current.click();\n      },\n      children: [_jsx(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        accept: Object.keys(acceptedTypes).join(','),\n        onChange: handleFileSelect,\n        className: \"hidden\",\n        disabled: loading\n      }), _jsx(Camera, {\n        className: \"mx-auto h-12 w-12 text-gray-400\"\n      }), _jsx(\"p\", {\n        className: \"mt-2 text-sm text-gray-600\",\n        children: initialInstructions\n      }), _jsxs(\"p\", {\n        className: \"text-xs text-gray-500 mt-1\",\n        children: [\"Supported formats: \", Object.keys(acceptedTypes).map(function (type) {\n          return type.split('/')[1].toUpperCase();\n        }).join(', ')]\n      }), _jsxs(\"div\", {\n        className: \"mt-4 flex justify-center gap-4\",\n        children: [allowCamera && _jsx(Button, {\n          onClick: function onClick(e) {\n            var _document$getElementB;\n            e.stopPropagation();\n            (_document$getElementB = document.getElementById('camera-input')) == null ? void 0 : _document$getElementB.click();\n          },\n          icon: Camera,\n          disabled: loading,\n          children: \"Take Photo\"\n        }), _jsx(Button, {\n          variant: \"secondary\",\n          onClick: function onClick(e) {\n            var _fileInputRef$current2;\n            e.stopPropagation();\n            (_fileInputRef$current2 = fileInputRef.current) == null ? void 0 : _fileInputRef$current2.click();\n          },\n          icon: Upload,\n          disabled: loading,\n          children: \"Upload\"\n        })]\n      })]\n    });\n  };\n  return _jsxs(Card, {\n    className: \"p-6\",\n    children: [error && _jsx(Alert, {\n      type: \"error\",\n      message: error,\n      className: \"mb-4\"\n    }), preview ? _jsx(ImagePreview, {}) : _jsx(UploadInterface, {})]\n  });\n};\nexport default DocumentScanner;","map":{"version":3,"names":["React","useState","useCallback","useRef","Card","Button","Alert","useToast","Camera","Upload","X","RotateCw","ZoomIn","ZoomOut","Maximize","Minimize","processImage","jsx","_jsx","jsxs","_jsxs","ACCEPTED_TYPES","MAX_FILE_SIZE","DocumentScanner","_ref","onScanComplete","_ref$loading","loading","_ref$maxFileSize","maxFileSize","_ref$acceptedTypes","acceptedTypes","_ref$allowCamera","allowCamera","_ref$initialInstructi","initialInstructions","_useState","_useState2","_slicedToArray","image","setImage","_useState3","_useState4","preview","setPreview","_useState5","_useState6","rotation","setRotation","_useState7","_useState8","zoom","setZoom","_useState9","_useState0","error","setError","_useState1","_useState10","isFullscreen","setIsFullscreen","fileInputRef","_useToast","showToast","validateFile","file","Error","Object","keys","includes","type","map","split","join","size","handleFileSelect","_ref2","_asyncToGenerator","event","_event$target$files","target","files","previewUrl","URL","createObjectURL","err","message","current","value","_x","apply","arguments","handleProcess","_ref3","processedImage","quality","handleClear","handleRotate","prev","handleZoom","delta","Math","max","min","handleFullscreen","revokeObjectURL","ImagePreview","className","children","src","alt","style","transform","cursor","onClick","variant","icon","disabled","title","UploadInterface","_fileInputRef$current","click","ref","accept","onChange","toUpperCase","e","_document$getElementB","stopPropagation","document","getElementById","_fileInputRef$current2"],"sources":["C:/Users/user/Documents/app.v3/client/src/features/documents/components/DocumentScanner.js"],"sourcesContent":["import React, { useState, useCallback, useRef } from 'react';\r\nimport { Card } from '../../../shared/components/ui/Card';\r\nimport { Button } from '../../../shared/components/forms/Button';\r\nimport { Alert } from '../../../shared/components/ui/Alert';\r\nimport { useToast } from '../../../shared/hooks/useToast';\r\nimport {\r\n  Camera,\r\n  Upload,\r\n  X,\r\n  RotateCw,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  Maximize,\r\n  Minimize\r\n} from 'lucide-react';\r\nimport { processImage } from '../utils/imageProcessing'; // Corrected import path\r\n\r\nconst ACCEPTED_TYPES = {\r\n  'image/jpeg': ['.jpg', '.jpeg'],\r\n  'image/png': ['.png'],\r\n  'image/heic': ['.heic']\r\n};\r\n\r\nconst MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\r\n\r\nexport const DocumentScanner = ({\r\n  onScanComplete,\r\n  loading = false,\r\n  maxFileSize = MAX_FILE_SIZE,\r\n  acceptedTypes = ACCEPTED_TYPES,\r\n  allowCamera = true,\r\n  initialInstructions = 'Take a photo or upload a document'\r\n}) => {\r\n  const [image, setImage] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n  const [rotation, setRotation] = useState(0);\r\n  const [zoom, setZoom] = useState(1);\r\n  const [error, setError] = useState(null);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n  const { showToast } = useToast();\r\n\r\n  const validateFile = (file) => {\r\n    if (!file) throw new Error('No file selected');\r\n\r\n    if (!Object.keys(acceptedTypes).includes(file.type)) {\r\n      throw new Error(`Unsupported file type. Accepted types: ${Object.keys(acceptedTypes).map(type => type.split('/')[1]).join(', ')}`);\r\n    }\r\n\r\n    if (file.size > maxFileSize) {\r\n      throw new Error(`File size exceeds ${maxFileSize / (1024 * 1024)}MB limit`);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = useCallback(async (event) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    try {\r\n      validateFile(file);\r\n\r\n      // Create preview\r\n      const previewUrl = URL.createObjectURL(file);\r\n      setImage(file);\r\n      setPreview(previewUrl);\r\n      setRotation(0);\r\n      setZoom(1);\r\n      setError(null);\r\n\r\n    } catch (err) {\r\n      setError(err.message);\r\n      showToast(err.message, 'error');\r\n    } finally {\r\n      // Reset file input\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  }, [showToast, maxFileSize, acceptedTypes]); // Added acceptedTypes to dependencies\r\n\r\n  const handleProcess = async () => {\r\n    if (!image) return;\r\n\r\n    try {\r\n      // Process image with current transformations\r\n      const processedImage = await processImage(image, {\r\n        rotation,\r\n        zoom,\r\n        quality: 0.8\r\n      });\r\n\r\n      await onScanComplete(processedImage);\r\n\r\n      handleClear();\r\n      showToast('Document processed successfully', 'success');\r\n    } catch (err) {\r\n      setError(err.message);\r\n      showToast(err.message, 'error');\r\n    }\r\n  };\r\n\r\n  const handleRotate = () => {\r\n    setRotation((prev) => (prev + 90) % 360);\r\n  };\r\n\r\n  const handleZoom = (delta) => {\r\n    setZoom(prev => Math.max(0.5, Math.min(3, prev + delta)));\r\n  };\r\n\r\n  const handleFullscreen = () => {\r\n    setIsFullscreen(prev => !prev);\r\n  };\r\n\r\n  const handleClear = () => {\r\n    if (preview) {\r\n      URL.revokeObjectURL(preview);\r\n    }\r\n    setImage(null);\r\n    setPreview(null);\r\n    setRotation(0);\r\n    setZoom(1);\r\n    setError(null);\r\n    setIsFullscreen(false);\r\n  };\r\n\r\n  const ImagePreview = () => (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"relative\">\r\n        <div className={`\r\n          relative overflow-hidden rounded-lg\r\n          ${isFullscreen ? 'fixed inset-0 z-50 bg-black' : 'w-full h-96'}\r\n        `}>\r\n          <img\r\n            src={preview}\r\n            alt=\"Document preview\"\r\n            className=\"w-full h-full object-contain transition-all duration-200\"\r\n            style={{\r\n              transform: `rotate(${rotation}deg) scale(${zoom})`,\r\n              cursor: isFullscreen ? 'zoom-out' : 'zoom-in'\r\n            }}\r\n            onClick={handleFullscreen}\r\n          />\r\n          <div className=\"absolute top-2 right-2 flex space-x-2\">\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              icon={RotateCw}\r\n              onClick={handleRotate}\r\n              disabled={loading}\r\n              title=\"Rotate image\"\r\n            />\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              icon={ZoomIn}\r\n              onClick={() => handleZoom(0.25)}\r\n              disabled={loading || zoom >= 3}\r\n              title=\"Zoom in\"\r\n            />\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              icon={ZoomOut}\r\n              onClick={() => handleZoom(-0.25)}\r\n              disabled={loading || zoom <= 0.5}\r\n              title=\"Zoom out\"\r\n            />\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              icon={isFullscreen ? Minimize : Maximize}\r\n              onClick={handleFullscreen}\r\n              disabled={loading}\r\n              title={isFullscreen ? 'Exit fullscreen' : 'View fullscreen'}\r\n            />\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              icon={X}\r\n              onClick={handleClear}\r\n              disabled={loading}\r\n              title=\"Clear image\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex justify-end space-x-2\">\r\n        <Button\r\n          variant=\"secondary\"\r\n          onClick={handleClear}\r\n          disabled={loading}\r\n        >\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={handleProcess}\r\n          loading={loading}\r\n          disabled={loading}\r\n        >\r\n          Process Document\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const UploadInterface = () => (\r\n    <div\r\n      className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-primary-500 transition-colors duration-200\"\r\n      onClick={() => fileInputRef.current?.click()}\r\n    >\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept={Object.keys(acceptedTypes).join(',')}\r\n        onChange={handleFileSelect}\r\n        className=\"hidden\"\r\n        disabled={loading}\r\n      />\r\n\r\n      <Camera className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n      <p className=\"mt-2 text-sm text-gray-600\">\r\n        {initialInstructions}\r\n      </p>\r\n      <p className=\"text-xs text-gray-500 mt-1\">\r\n        Supported formats: {Object.keys(acceptedTypes)\r\n          .map(type => type.split('/')[1].toUpperCase())\r\n          .join(', ')}\r\n      </p>\r\n\r\n      <div className=\"mt-4 flex justify-center gap-4\">\r\n        {allowCamera && (\r\n          <Button\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              document.getElementById('camera-input')?.click();\r\n            }}\r\n            icon={Camera}\r\n            disabled={loading}\r\n          >\r\n            Take Photo\r\n          </Button>\r\n        )}\r\n        <Button\r\n          variant=\"secondary\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            fileInputRef.current?.click();\r\n          }}\r\n          icon={Upload}\r\n          disabled={loading}\r\n        >\r\n          Upload\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Card className=\"p-6\">\r\n      {error && (\r\n        <Alert\r\n          type=\"error\"\r\n          message={error}\r\n          className=\"mb-4\"\r\n        />\r\n      )}\r\n\r\n      {preview ? <ImagePreview /> : <UploadInterface />}\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default DocumentScanner;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}