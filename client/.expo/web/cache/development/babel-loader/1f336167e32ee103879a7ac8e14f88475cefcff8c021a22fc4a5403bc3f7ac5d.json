{"ast":null,"code":"import React, { useMemo } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { Card } from \"../../../../shared/components/ui/Card\";\nimport { formatCurrency } from \"../../../../shared/utils/currency\";\nimport { formatDate } from \"../../../../shared/utils/date\";\nimport { SpendingBreakdown } from \"../reports/SpendingBreakdown\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var SpendingSummary = function SpendingSummary(_ref) {\n  var _ref$data = _ref.data,\n    data = _ref$data === void 0 ? [] : _ref$data,\n    _ref$loading = _ref.loading,\n    loading = _ref$loading === void 0 ? false : _ref$loading;\n  var chartData = useMemo(function () {\n    var dailySpending = data.reduce(function (acc, receipt) {\n      var date = formatDate(receipt.date, 'MMM dd');\n      if (!acc[date]) {\n        acc[date] = {\n          date: date,\n          amount: 0,\n          count: 0\n        };\n      }\n      acc[date].amount += receipt.total;\n      acc[date].count += 1;\n      return acc;\n    }, {});\n    return Object.values(dailySpending).sort(function (a, b) {\n      return new Date(a.date) - new Date(b.date);\n    });\n  }, [data]);\n  var CustomTooltip = function CustomTooltip(_ref2) {\n    var active = _ref2.active,\n      payload = _ref2.payload,\n      label = _ref2.label;\n    if (!active || !payload || !payload.length) return null;\n    return _jsxs(\"div\", {\n      className: \"bg-white p-4 shadow-lg rounded-lg border\",\n      children: [_jsx(\"p\", {\n        className: \"font-medium text-gray-900\",\n        children: label\n      }), _jsxs(\"p\", {\n        className: \"text-sm text-gray-600\",\n        children: [\"Total: \", formatCurrency(payload[0].value)]\n      }), _jsxs(\"p\", {\n        className: \"text-sm text-gray-600\",\n        children: [\"Receipts: \", payload[0].payload.count]\n      })]\n    });\n  };\n  if (loading) {\n    return _jsx(Card, {\n      children: _jsx(\"div\", {\n        className: \"p-4\",\n        children: _jsxs(\"div\", {\n          className: \"animate-pulse\",\n          children: [_jsx(\"div\", {\n            className: \"h-4 w-1/4 bg-gray-200 rounded mb-4\"\n          }), _jsx(\"div\", {\n            className: \"h-[300px] bg-gray-100 rounded\"\n          })]\n        })\n      })\n    });\n  }\n  return _jsxs(Card, {\n    children: [_jsxs(\"div\", {\n      className: \"p-4\",\n      children: [_jsx(\"h3\", {\n        className: \"text-lg font-medium text-gray-900 mb-4\",\n        children: \"Spending Overview\"\n      }), _jsx(\"div\", {\n        className: \"h-[300px]\",\n        children: _jsx(ResponsiveContainer, {\n          width: \"100%\",\n          height: \"100%\",\n          children: _jsxs(LineChart, {\n            data: chartData,\n            margin: {\n              top: 5,\n              right: 30,\n              left: 20,\n              bottom: 5\n            },\n            children: [_jsx(CartesianGrid, {\n              strokeDasharray: \"3 3\",\n              stroke: \"#E5E7EB\"\n            }), _jsx(XAxis, {\n              dataKey: \"date\",\n              stroke: \"#6B7280\",\n              fontSize: 12\n            }), _jsx(YAxis, {\n              stroke: \"#6B7280\",\n              fontSize: 12,\n              tickFormatter: function tickFormatter(value) {\n                return formatCurrency(value);\n              }\n            }), _jsx(Tooltip, {\n              content: _jsx(CustomTooltip, {})\n            }), _jsx(Line, {\n              type: \"monotone\",\n              dataKey: \"amount\",\n              stroke: \"#0EA5E9\",\n              strokeWidth: 2,\n              dot: {\n                fill: '#0EA5E9',\n                r: 4\n              },\n              activeDot: {\n                r: 6\n              }\n            })]\n          })\n        })\n      })]\n    }), _jsx(\"div\", {\n      className: \"border-t px-4 py-3 bg-gray-50\",\n      children: _jsxs(\"div\", {\n        className: \"grid grid-cols-3 gap-4\",\n        children: [_jsxs(\"div\", {\n          children: [_jsx(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Total Spending\"\n          }), _jsx(\"p\", {\n            className: \"text-lg font-semibold text-gray-900\",\n            children: formatCurrency(chartData.reduce(function (sum, item) {\n              return sum + item.amount;\n            }, 0))\n          })]\n        }), _jsxs(\"div\", {\n          children: [_jsx(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Avg. per Day\"\n          }), _jsx(\"p\", {\n            className: \"text-lg font-semibold text-gray-900\",\n            children: formatCurrency(chartData.reduce(function (sum, item) {\n              return sum + item.amount;\n            }, 0) / chartData.length)\n          })]\n        }), _jsxs(\"div\", {\n          children: [_jsx(\"p\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Total Receipts\"\n          }), _jsx(\"p\", {\n            className: \"text-lg font-semibold text-gray-900\",\n            children: chartData.reduce(function (sum, item) {\n              return sum + item.count;\n            }, 0)\n          })]\n        })]\n      })\n    }), _jsx(\"div\", {\n      className: \"pt-6\",\n      children: _jsx(SpendingBreakdown, {\n        data: data,\n        loading: loading\n      })\n    })]\n  });\n};","map":{"version":3,"names":["React","useMemo","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","Card","formatCurrency","formatDate","SpendingBreakdown","jsx","_jsx","jsxs","_jsxs","SpendingSummary","_ref","_ref$data","data","_ref$loading","loading","chartData","dailySpending","reduce","acc","receipt","date","amount","count","total","Object","values","sort","a","b","Date","CustomTooltip","_ref2","active","payload","label","length","className","children","value","width","height","margin","top","right","left","bottom","strokeDasharray","stroke","dataKey","fontSize","tickFormatter","content","type","strokeWidth","dot","fill","r","activeDot","sum","item"],"sources":["C:/Users/user/Documents/app.v3/client/src/features/analytics/components/dashboard/SpendingSummary.js"],"sourcesContent":["import React, { useMemo } from 'react'; //correct\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n} from 'recharts'; //correct\n\r\nimport { Card } from '../../../../shared/components/ui/Card'; //correct\r\nimport { formatCurrency } from '../../../../shared/utils/currency'; //correct\r\nimport { formatDate } from '../../../../shared/utils/date'; //correct\r\nimport { SpendingBreakdown } from '../reports/SpendingBreakdown'; //correct\r\n\r\nexport const SpendingSummary = ({ data = [], loading = false }) => {\r\n  const chartData = useMemo(() => {\r\n    const dailySpending = data.reduce((acc, receipt) => {\r\n      const date = formatDate(receipt.date, 'MMM dd');\r\n      if (!acc[date]) {\r\n        acc[date] = {\r\n          date,\r\n          amount: 0,\r\n          count: 0,\r\n        };\r\n      }\r\n      acc[date].amount += receipt.total;\r\n      acc[date].count += 1;\r\n      return acc;\r\n    }, {});\r\n\r\n    return Object.values(dailySpending).sort((a, b) => new Date(a.date) - new Date(b.date));\r\n  }, [data]);\r\n\r\n  const CustomTooltip = ({ active, payload, label }) => {\r\n    if (!active || !payload || !payload.length) return null;\r\n\r\n    return (\r\n      <div className=\"bg-white p-4 shadow-lg rounded-lg border\">\r\n        <p className=\"font-medium text-gray-900\">{label}</p>\r\n        <p className=\"text-sm text-gray-600\">Total: {formatCurrency(payload[0].value)}</p>\r\n        <p className=\"text-sm text-gray-600\">Receipts: {payload[0].payload.count}</p>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card>\r\n        <div className=\"p-4\">\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"h-4 w-1/4 bg-gray-200 rounded mb-4\" />\r\n            <div className=\"h-[300px] bg-gray-100 rounded\" />\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <div className=\"p-4\">\r\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Spending Overview</h3>\r\n        <div className=\"h-[300px]\">\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <LineChart data={chartData} margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#E5E7EB\" />\r\n              <XAxis dataKey=\"date\" stroke=\"#6B7280\" fontSize={12} />\r\n              <YAxis\r\n                stroke=\"#6B7280\"\r\n                fontSize={12}\r\n                tickFormatter={value => formatCurrency(value)}\r\n              />\r\n              <Tooltip content={<CustomTooltip />} />\r\n              <Line\r\n                type=\"monotone\"\r\n                dataKey=\"amount\"\r\n                stroke=\"#0EA5E9\"\r\n                strokeWidth={2}\r\n                dot={{ fill: '#0EA5E9', r: 4 }}\r\n                activeDot={{ r: 6 }}\r\n              />\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"border-t px-4 py-3 bg-gray-50\">\r\n        <div className=\"grid grid-cols-3 gap-4\">\r\n          <div>\r\n            <p className=\"text-sm text-gray-500\">Total Spending</p>\r\n            <p className=\"text-lg font-semibold text-gray-900\">\r\n              {formatCurrency(chartData.reduce((sum, item) => sum + item.amount, 0))}\r\n            </p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm text-gray-500\">Avg. per Day</p>\r\n            <p className=\"text-lg font-semibold text-gray-900\">\r\n              {formatCurrency(\r\n                chartData.reduce((sum, item) => sum + item.amount, 0) / chartData.length\r\n              )}\r\n            </p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-sm text-gray-500\">Total Receipts</p>\r\n            <p className=\"text-lg font-semibold text-gray-900\">\r\n              {chartData.reduce((sum, item) => sum + item.count, 0)}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"pt-6\">\r\n        {/* Adding the Spending Breakdown Component for category-wise data */}\r\n        <SpendingBreakdown data={data} loading={loading} />\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}