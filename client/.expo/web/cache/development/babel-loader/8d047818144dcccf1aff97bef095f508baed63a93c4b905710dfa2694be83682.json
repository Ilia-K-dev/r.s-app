{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { Camera, Upload, X, RotateCw, ZoomIn, ZoomOut, Maximize, Minimize, File as FileIcon } from 'lucide-react';\nimport React, { useState, useRef, useCallback } from 'react';\nimport { Button } from \"../../../shared/components/forms/Button\";\nimport { Alert } from \"../../../shared/components/ui/Alert\";\nimport { Card } from \"../../../shared/components/ui/Card\";\nimport { useToast } from \"../../../shared/hooks/useToast\";\nimport { validateFile } from \"../../../shared/utils/fileHelpers\";\nexport var ACCEPTED_TYPES = {\n  'image/jpeg': ['.jpg', '.jpeg'],\n  'image/png': ['.png'],\n  'image/heic': ['.heic'],\n  'application/pdf': ['.pdf']\n};\nexport var MAX_FILE_SIZE = 10 * 1024 * 1024;\nexport var BaseDocumentHandler = function BaseDocumentHandler(_ref) {\n  var onCapture = _ref.onCapture,\n    onUpload = _ref.onUpload,\n    onProcess = _ref.onProcess,\n    _ref$documentType = _ref.documentType,\n    documentType = _ref$documentType === void 0 ? 'document' : _ref$documentType,\n    _ref$allowedTypes = _ref.allowedTypes,\n    allowedTypes = _ref$allowedTypes === void 0 ? ACCEPTED_TYPES : _ref$allowedTypes,\n    _ref$maxSize = _ref.maxSize,\n    maxSize = _ref$maxSize === void 0 ? MAX_FILE_SIZE : _ref$maxSize,\n    _ref$allowCamera = _ref.allowCamera,\n    allowCamera = _ref$allowCamera === void 0 ? true : _ref$allowCamera,\n    _ref$showPreview = _ref.showPreview,\n    showPreview = _ref$showPreview === void 0 ? true : _ref$showPreview,\n    _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    file = _useState2[0],\n    setFile = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    preview = _useState4[0],\n    setPreview = _useState4[1];\n  var _useState5 = useState(0),\n    _useState6 = _slicedToArray(_useState5, 2),\n    rotation = _useState6[0],\n    setRotation = _useState6[1];\n  var _useState7 = useState(1),\n    _useState8 = _slicedToArray(_useState7, 2),\n    zoom = _useState8[0],\n    setZoom = _useState8[1];\n  var _useState9 = useState(false),\n    _useState0 = _slicedToArray(_useState9, 2),\n    loading = _useState0[0],\n    setLoading = _useState0[1];\n  var _useState1 = useState(null),\n    _useState10 = _slicedToArray(_useState1, 2),\n    error = _useState10[0],\n    setError = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    isFullscreen = _useState12[0],\n    setIsFullscreen = _useState12[1];\n  var fileInputRef = useRef(null);\n  var _useToast = useToast(),\n    showToast = _useToast.showToast;\n  var handleFileSelect = function () {\n    var _ref2 = _asyncToGenerator(function* (event) {\n      var _event$target$files;\n      var selectedFile = (_event$target$files = event.target.files) == null ? void 0 : _event$target$files[0];\n      if (!selectedFile) return;\n      try {\n        setLoading(true);\n        validateFile(selectedFile);\n        var previewUrl = null;\n        if (showPreview && selectedFile.type.startsWith('image/')) {\n          previewUrl = yield generatePreview(selectedFile);\n        }\n        setFile(selectedFile);\n        setPreview(previewUrl);\n        setError(null);\n        if (onUpload) {\n          yield onUpload(selectedFile);\n        }\n      } catch (err) {\n        setError(err.message);\n        showToast(err.message, 'error');\n      } finally {\n        setLoading(false);\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n      }\n    });\n    return function handleFileSelect(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleCameraCapture = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        setLoading(true);\n        var capturedFile = yield onCapture == null ? void 0 : onCapture();\n        if (capturedFile) {\n          validateFile(capturedFile);\n          var previewUrl = yield generatePreview(capturedFile);\n          setFile(capturedFile);\n          setPreview(previewUrl);\n          setError(null);\n        }\n      } catch (error) {\n        setError(error.message);\n        showToast('Failed to capture image', 'error');\n      } finally {\n        setLoading(false);\n      }\n    });\n    return function handleCameraCapture() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\nexport default BaseDocumentHandler;","map":{"version":3,"names":["Camera","Upload","X","RotateCw","ZoomIn","ZoomOut","Maximize","Minimize","File","FileIcon","React","useState","useRef","useCallback","Button","Alert","Card","useToast","validateFile","ACCEPTED_TYPES","MAX_FILE_SIZE","BaseDocumentHandler","_ref","onCapture","onUpload","onProcess","_ref$documentType","documentType","_ref$allowedTypes","allowedTypes","_ref$maxSize","maxSize","_ref$allowCamera","allowCamera","_ref$showPreview","showPreview","_ref$className","className","_useState","_useState2","_slicedToArray","file","setFile","_useState3","_useState4","preview","setPreview","_useState5","_useState6","rotation","setRotation","_useState7","_useState8","zoom","setZoom","_useState9","_useState0","loading","setLoading","_useState1","_useState10","error","setError","_useState11","_useState12","isFullscreen","setIsFullscreen","fileInputRef","_useToast","showToast","handleFileSelect","_ref2","_asyncToGenerator","event","_event$target$files","selectedFile","target","files","previewUrl","type","startsWith","generatePreview","err","message","current","value","_x","apply","arguments","handleCameraCapture","_ref3","capturedFile"],"sources":["C:/Users/user/Documents/app.v3/client/src/features/documents/components/BaseDocumentHandler.js"],"sourcesContent":["import {\r\n  Camera,\r\n  Upload,\r\n  X,\r\n  RotateCw,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  Maximize,\r\n  Minimize,\r\n  File as FileIcon,\r\n} from 'lucide-react';\r\nimport React, { useState, useRef, useCallback } from 'react';\r\n\r\nimport { Button } from '../../../shared/components/forms/Button';\r\nimport { Alert } from '../../../shared/components/ui/Alert';\r\nimport { Card } from '../../../shared/components/ui/Card';\r\nimport { useToast } from '../../../shared/hooks/useToast';\r\nimport { validateFile } from '../../../shared/utils/fileHelpers'; // Updated import\r\n\r\nexport const ACCEPTED_TYPES = {\r\n  'image/jpeg': ['.jpg', '.jpeg'],\r\n  'image/png': ['.png'],\r\n  'image/heic': ['.heic'],\r\n  'application/pdf': ['.pdf'],\r\n};\r\n\r\nexport const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\r\n\r\nexport const BaseDocumentHandler = ({\r\n  onCapture,\r\n  onUpload,\r\n  onProcess,\r\n  documentType = 'document',\r\n  allowedTypes = ACCEPTED_TYPES,\r\n  maxSize = MAX_FILE_SIZE,\r\n  allowCamera = true,\r\n  showPreview = true,\r\n  className = '',\r\n}) => {\r\n  const [file, setFile] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n  const [rotation, setRotation] = useState(0);\r\n  const [zoom, setZoom] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n  const { showToast } = useToast();\r\n\r\n  const handleFileSelect = async event => {\r\n    const selectedFile = event.target.files?.[0];\r\n    if (!selectedFile) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      validateFile(selectedFile); // Using the imported validateFile\r\n\r\n      let previewUrl = null;\r\n      if (showPreview && selectedFile.type.startsWith('image/')) {\r\n        previewUrl = await generatePreview(selectedFile);\r\n      }\r\n\r\n      setFile(selectedFile);\r\n      setPreview(previewUrl);\r\n      setError(null);\r\n\r\n      if (onUpload) {\r\n        await onUpload(selectedFile);\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n      showToast(err.message, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCameraCapture = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const capturedFile = await onCapture?.();\r\n      if (capturedFile) {\r\n        validateFile(capturedFile); // Using the imported validateFile\r\n        const previewUrl = await generatePreview(capturedFile);\r\n        setFile(capturedFile);\r\n        setPreview(previewUrl);\r\n        setError(null);\r\n      }\r\n    } catch (error) {\r\n      setError(error.message);\r\n      showToast('Failed to capture image', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ... (rest of the component remains unchanged)\r\n\r\n};\r\n\r\nexport default BaseDocumentHandler;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}