{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { db } from \"../../../core/config/firebase\";\nexport var getSpendingAnalytics = function () {\n  var _ref = _asyncToGenerator(function* (userId, startDate, endDate) {\n    try {\n      var receiptsRef = db.collection('receipts').where('userId', '==', userId).where('date', '>=', startDate).where('date', '<=', endDate);\n      var snapshot = yield receiptsRef.get();\n      var receipts = snapshot.docs.map(function (doc) {\n        return _objectSpread({\n          id: doc.id\n        }, doc.data());\n      });\n      var totalSpending = receipts.reduce(function (sum, receipt) {\n        return sum + receipt.totalAmount;\n      }, 0);\n      var categoryBreakdown = receipts.reduce(function (breakdown, receipt) {\n        receipt.items.forEach(function (item) {\n          var category = item.category;\n          breakdown[category] = (breakdown[category] || 0) + item.totalPrice;\n        });\n        return breakdown;\n      }, {});\n      return {\n        totalSpending: totalSpending,\n        categoryBreakdown: categoryBreakdown,\n        receipts: receipts\n      };\n    } catch (error) {\n      console.error('Error getting spending analytics:', error);\n      throw error;\n    }\n  });\n  return function getSpendingAnalytics(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getInventoryAnalytics = function () {\n  var _ref2 = _asyncToGenerator(function* (userId) {\n    try {\n      var inventoryRef = db.collection('inventory').where('userId', '==', userId);\n      var snapshot = yield inventoryRef.get();\n      var inventory = snapshot.docs.map(function (doc) {\n        return _objectSpread({\n          id: doc.id\n        }, doc.data());\n      });\n      var totalValue = inventory.reduce(function (sum, item) {\n        return sum + item.quantity * item.unitPrice;\n      }, 0);\n      var lowStockItems = inventory.filter(function (item) {\n        return item.quantity <= item.reorderPoint;\n      });\n      var categoryBreakdown = inventory.reduce(function (breakdown, item) {\n        var category = item.category;\n        breakdown[category] = (breakdown[category] || 0) + item.quantity * item.unitPrice;\n        return breakdown;\n      }, {});\n      return {\n        totalValue: totalValue,\n        lowStockItems: lowStockItems,\n        categoryBreakdown: categoryBreakdown,\n        inventory: inventory\n      };\n    } catch (error) {\n      console.error('Error getting inventory analytics:', error);\n      throw error;\n    }\n  });\n  return function getInventoryAnalytics(_x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["db","getSpendingAnalytics","_ref","_asyncToGenerator","userId","startDate","endDate","receiptsRef","collection","where","snapshot","get","receipts","docs","map","doc","_objectSpread","id","data","totalSpending","reduce","sum","receipt","totalAmount","categoryBreakdown","breakdown","items","forEach","item","category","totalPrice","error","console","_x","_x2","_x3","apply","arguments","getInventoryAnalytics","_ref2","inventoryRef","inventory","totalValue","quantity","unitPrice","lowStockItems","filter","reorderPoint","_x4"],"sources":["C:/Users/user/Documents/app.v3/client/src/features/analytics/services/analyticsService.js"],"sourcesContent":["import { db } from '../../../core/config/firebase'; //correct\r\n\r\nexport const getSpendingAnalytics = async (userId, startDate, endDate) => {\r\n  try {\r\n    const receiptsRef = db\r\n      .collection('receipts')\r\n      .where('userId', '==', userId)\r\n      .where('date', '>=', startDate)\r\n      .where('date', '<=', endDate);\r\n\r\n    const snapshot = await receiptsRef.get();\r\n    const receipts = snapshot.docs.map(doc => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n    }));\r\n\r\n    const totalSpending = receipts.reduce((sum, receipt) => sum + receipt.totalAmount, 0);\r\n    const categoryBreakdown = receipts.reduce((breakdown, receipt) => {\r\n      receipt.items.forEach(item => {\r\n        const category = item.category;\r\n        breakdown[category] = (breakdown[category] || 0) + item.totalPrice;\r\n      });\r\n      return breakdown;\r\n    }, {});\r\n\r\n    return {\r\n      totalSpending,\r\n      categoryBreakdown,\r\n      receipts,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error getting spending analytics:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getInventoryAnalytics = async userId => {\r\n  try {\r\n    const inventoryRef = db.collection('inventory').where('userId', '==', userId);\r\n\r\n    const snapshot = await inventoryRef.get();\r\n    const inventory = snapshot.docs.map(doc => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n    }));\r\n\r\n    const totalValue = inventory.reduce((sum, item) => sum + item.quantity * item.unitPrice, 0);\r\n    const lowStockItems = inventory.filter(item => item.quantity <= item.reorderPoint);\r\n    const categoryBreakdown = inventory.reduce((breakdown, item) => {\r\n      const category = item.category;\r\n      breakdown[category] = (breakdown[category] || 0) + item.quantity * item.unitPrice;\r\n      return breakdown;\r\n    }, {});\r\n\r\n    return {\r\n      totalValue,\r\n      lowStockItems,\r\n      categoryBreakdown,\r\n      inventory,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error getting inventory analytics:', error);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}