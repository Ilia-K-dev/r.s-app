{"ast":null,"code":"import React, { useMemo } from 'react';\nimport { PieChart, Pie, Cell, Legend, Tooltip, ResponsiveContainer } from 'recharts';\nimport { formatCurrency } from \"../../../shared/utils/currency\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var CategoryBreakdown = function CategoryBreakdown(_ref) {\n  var _ref$data = _ref.data,\n    data = _ref$data === void 0 ? [] : _ref$data;\n  var chartData = useMemo(function () {\n    if (!data || data.length === 0) return [];\n    var categories = data.reduce(function (acc, receipt) {\n      var category = receipt.category || 'Uncategorized';\n      if (!acc[category]) {\n        acc[category] = {\n          name: category,\n          value: 0,\n          color: getCategoryColor(category)\n        };\n      }\n      acc[category].value += receipt.total;\n      return acc;\n    }, {});\n    return Object.values(categories).sort(function (a, b) {\n      return b.value - a.value;\n    });\n  }, [data]);\n  function getCategoryColor(category) {\n    var colors = {\n      'Groceries': '#22C55E',\n      'Dining': '#F59E0B',\n      'Transportation': '#3B82F6',\n      'Utilities': '#8B5CF6',\n      'Entertainment': '#EC4899',\n      'Shopping': '#06B6D4',\n      'Health': '#EF4444',\n      'Uncategorized': '#6B7280'\n    };\n    return colors[category] || '#6B7280';\n  }\n  if (chartData.length === 0) {\n    return _jsx(\"div\", {\n      className: \"h-full flex items-center justify-center text-gray-500\",\n      children: \"No data available\"\n    });\n  }\n  return _jsx(ResponsiveContainer, {\n    width: \"100%\",\n    height: \"100%\",\n    children: _jsxs(PieChart, {\n      children: [_jsx(Pie, {\n        data: chartData,\n        cx: \"50%\",\n        cy: \"50%\",\n        labelLine: false,\n        outerRadius: 80,\n        fill: \"#8884d8\",\n        dataKey: \"value\",\n        label: function label(_ref2) {\n          var name = _ref2.name,\n            percent = _ref2.percent;\n          return `${name} (${(percent * 100).toFixed(0)}%)`;\n        },\n        children: chartData.map(function (entry, index) {\n          return _jsx(Cell, {\n            fill: entry.color\n          }, `cell-${index}`);\n        })\n      }), _jsx(Tooltip, {\n        formatter: function formatter(value) {\n          return [formatCurrency(value), 'Amount'];\n        },\n        labelStyle: {\n          color: '#111827'\n        },\n        contentStyle: {\n          backgroundColor: '#FFFFFF',\n          border: '1px solid #E5E7EB',\n          borderRadius: '0.375rem',\n          padding: '0.5rem'\n        }\n      }), _jsx(Legend, {})]\n    })\n  });\n};\nexport default CategoryBreakdown;","map":{"version":3,"names":["React","useMemo","PieChart","Pie","Cell","Legend","Tooltip","ResponsiveContainer","formatCurrency","jsx","_jsx","jsxs","_jsxs","CategoryBreakdown","_ref","_ref$data","data","chartData","length","categories","reduce","acc","receipt","category","name","value","color","getCategoryColor","total","Object","values","sort","a","b","colors","className","children","width","height","cx","cy","labelLine","outerRadius","fill","dataKey","label","_ref2","percent","toFixed","map","entry","index","formatter","labelStyle","contentStyle","backgroundColor","border","borderRadius","padding"],"sources":["C:/Users/user/Documents/app.v3/client/src/features/analytics/components/CategoryBreakdown.js"],"sourcesContent":["import React, { useMemo } from 'react';\r\nimport { \r\n  PieChart, \r\n  Pie, \r\n  Cell, \r\n  Legend, \r\n  Tooltip, \r\n  ResponsiveContainer \r\n} from 'recharts';\r\nimport { formatCurrency } from '../../../shared/utils/currency';\r\n\r\nexport const CategoryBreakdown = ({ data = [] }) => {\r\n  const chartData = useMemo(() => {\r\n    if (!data || data.length === 0) return [];\r\n\r\n    // Group receipts by category and sum totals\r\n    const categories = data.reduce((acc, receipt) => {\r\n      const category = receipt.category || 'Uncategorized';\r\n      \r\n      if (!acc[category]) {\r\n        acc[category] = { \r\n          name: category, \r\n          value: 0,\r\n          color: getCategoryColor(category)\r\n        };\r\n      }\r\n      \r\n      acc[category].value += receipt.total;\r\n      return acc;\r\n    }, {});\r\n\r\n    // Convert to array and sort by amount\r\n    return Object.values(categories).sort((a, b) => b.value - a.value);\r\n  }, [data]);\r\n\r\n  // Helper to get a consistent color for each category\r\n  function getCategoryColor(category) {\r\n    const colors = {\r\n      'Groceries': '#22C55E',\r\n      'Dining': '#F59E0B',\r\n      'Transportation': '#3B82F6',\r\n      'Utilities': '#8B5CF6',\r\n      'Entertainment': '#EC4899',\r\n      'Shopping': '#06B6D4',\r\n      'Health': '#EF4444',\r\n      'Uncategorized': '#6B7280'\r\n      // Add more colors as needed\r\n    };\r\n    \r\n    return colors[category] || '#6B7280';\r\n  }\r\n\r\n  if (chartData.length === 0) {\r\n    return (\r\n      <div className=\"h-full flex items-center justify-center text-gray-500\">\r\n        No data available\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n      <PieChart>\r\n        <Pie\r\n          data={chartData}\r\n          cx=\"50%\"\r\n          cy=\"50%\"\r\n          labelLine={false}\r\n          outerRadius={80}\r\n          fill=\"#8884d8\"\r\n          dataKey=\"value\"\r\n          label={({ name, percent }) => `${name} (${(percent * 100).toFixed(0)}%)`}\r\n        >\r\n          {chartData.map((entry, index) => (\r\n            <Cell key={`cell-${index}`} fill={entry.color} />\r\n          ))}\r\n        </Pie>\r\n        <Tooltip\r\n          formatter={(value) => [formatCurrency(value), 'Amount']}\r\n          labelStyle={{ color: '#111827' }}\r\n          contentStyle={{\r\n            backgroundColor: '#FFFFFF',\r\n            border: '1px solid #E5E7EB',\r\n            borderRadius: '0.375rem',\r\n            padding: '0.5rem'\r\n          }}\r\n        />\r\n        <Legend />\r\n      </PieChart>\r\n    </ResponsiveContainer>\r\n  );\r\n};\r\n\r\nexport default CategoryBreakdown;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}